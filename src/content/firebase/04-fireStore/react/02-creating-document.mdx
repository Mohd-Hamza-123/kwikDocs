---
title: Creating a Document
isPublished: true
---

### Configure Firestore Database

First, initialize Firebase and set up Firestore:

```javascript
import { initializeApp } from "firebase/app";
import { getFirestore } from "firebase/firestore";

// Firebase configuration (replace with your own keys in .env)
const firebaseConfig = {
  apiKey: process.env.FIREBASE_API_KEY,
  authDomain: process.env.FIREBASE_AUTH_DOMAIN,
  // other config values...
};

// Initialize Firebase App
const app = initializeApp(firebaseConfig);

// Initialize Firestore Database
export const firestoreDb = getFirestore(app, "database name");
```


### Create a Document

The following React component creates a new Firestore document using a form:

```jsx
import { fireStoreDb } from '@/firebase/firebase.js'; // firebse configuration
import { collection, addDoc, serverTimestamp, getDoc } from "firebase/firestore";

const CreatePost = () => {
  const handleSubmit = async (e) => {
    e.preventDefault();

    try {
      // Extract form data
      const formData = new FormData(e.target);
      const title = formData.get('title');
      const content = formData.get('content');

      // Add a new document to the "posts" collection
      const document = await addDoc(collection(fireStoreDb, "posts"), {
        title,                         // Post title
        content,                       // Post content
        createdAt: serverTimestamp(),  // Server-generated timestamp
        like: 0,                        // Default like count
        image: {                        // Placeholder image object
          secure_url: "",
          public_id: ""
        },
        isPublished: true,              // Default publish status
      });

      // Retrieve the newly created document snapshot
      const docSnap = await getDoc(document);

      if (docSnap.exists()) {
        console.log(docSnap.data());
      } else {
        alert("Post not created");
      }
    } catch (error) {
      console.error(error);
    }
  };

  return (
    <div>
      <h1>Create Post</h1>
      <form onSubmit={handleSubmit}>
        <input type="text" placeholder="Title" name="title" />
        <textarea placeholder="Content" name="content" />
        <button type="submit" className="block bg-green-500 text-white">
          Submit
        </button>
      </form>
    </div>
  );
};

export default CreatePost;
```


### Creating a Sub-Collection

This example demonstrates how to create a sub-collection called `comments` under the `posts` collection. Each comment will include text, the ID of the user who created it, and a timestamp.

```jsx
import { collection, addDoc, serverTimestamp } from "firebase/firestore";
import { fireStoreDb } from "@/firebase/firebase"; // firebse configuration

// Reference to the comments sub-collection inside a post document
const commentsRef = collection(fireStoreDb, "posts", postId, "comments");

await addDoc(commentsRef, {
  text: text,
  userId: userId,
  createdAt: serverTimestamp()
});

console.log("Comment added!");
```


### Firestore Structure

The structure of the collections and sub-collections will look like this:

```
posts (collection)
  └── postId (document)
        └── comments (sub-collection)
              └── commentId (document)
```

This approach organizes comments as sub-documents inside each post, keeping related data grouped together.

---