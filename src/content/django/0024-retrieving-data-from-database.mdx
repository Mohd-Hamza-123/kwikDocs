---
title: Retrieving Data from DB
description: Learn how to retrieve data from the database
published: true
---

Retrieving data from a database in Django is primarily done using the model's **QuerySet API**. Here are various ways to retrieve data from the database:

The QuerySet API in Django is a high-level interface for interacting with your database.

---

### 1. **Retrieve All Records**
Use the `.all()` method to fetch all records of a model.

```python
from myapp.models import Product
from django.shortcuts import render
def get_all_products():
    # Fetch all products
    products = Product.objects.all()
    dict = {
      'data' : products
    }
    return render(request, 'myapp/products.html',context = dict)
```

---

### 2. **Retrieve a Single Record by ID**
Use the `.get()` method with the primary key or another unique field. This will raise a `DoesNotExist` exception if the object is not found.

```python
product = Product.objects.get(id=1)
```

---

### 3. **Retrieve Records Using Filtering**
Use the `.filter()` method to retrieve records that match specific conditions. It returns a QuerySet.

```python
# Fetch products where price is greater than 50
products = Product.objects.filter(price__gt=50)
```

---

### 4. **Retrieve the First or Last Record**
Use `.first()` or `.last()` to get the first or last record in a QuerySet.

```python
first_product = Product.objects.all().first()
last_product = Product.objects.all().last()
```

---

### 5. **Retrieve a Subset of Records (Slicing)**
Use slicing to retrieve a limited number of records.

```python
# Fetch the first 5 products
products = Product.objects.all()[:5]
```

---

### 6. **Retrieve Records Using Exclusion**
Use the `.exclude()` method to exclude records matching a condition.

```python
# Exclude products with price less than 20
products = Product.objects.exclude(price__lt=20)
```

---

### 7. **Order Records**
Use `.order_by()` to sort records.

```python
# Order products by price in ascending order
products = Product.objects.all().order_by('price')

# Order by price in descending order
products = Product.objects.all().order_by('-price')
```

---

### 8. **Retrieve Specific Fields**
Use `.values()` or `.values_list()` to fetch specific fields instead of entire model objects.

- **Using `.values()`** (returns a list of dictionaries):
  ```python
  products = Product.objects.values('id', 'name', 'price')
  ```

- **Using `.values_list()`** (returns a list of tuples):
  ```python
  products = Product.objects.values_list('id', 'name', 'price')
  ```

---

### 9. **Retrieve Distinct Records**
Use `.distinct()` to eliminate duplicate records.

```python
products = Product.objects.values('category').distinct()
```

---

### 10. **Execute Raw SQL Queries**
Use `raw()` for custom SQL queries.

```python
from django.db import connection

# Raw SQL query
products = Product.objects.raw('SELECT * FROM myapp_product WHERE price > %s', [50])

# Raw query using connection
with connection.cursor() as cursor:
    cursor.execute("SELECT * FROM myapp_product WHERE price > %s", [50])
    rows = cursor.fetchall()
```

---

### 11. **Handle Query Exceptions**
Handle cases where a record is not found or multiple records are returned.

- **Handle `DoesNotExist` Exception**:
  ```python
  from myapp.models import Product
  from django.core.exceptions import ObjectDoesNotExist

  try:
      product = Product.objects.get(id=999)
  except ObjectDoesNotExist:
      product = None
  ```

- **Handle `MultipleObjectsReturned` Exception**:
  ```python
  try:
      product = Product.objects.get(price=50)
  except Product.MultipleObjectsReturned:
      product = Product.objects.filter(price=50).first()
  ```

---

### 12. **Advanced Filtering**
Use complex queries with Django's **ORM Lookups** (e.g., `__icontains`, `__gte`, `__in`, `__range`, etc.).

```python
# Filter products with name containing "phone" (case-insensitive)
products = Product.objects.filter(name__icontains="phone")

# Filter products with price between 10 and 50
products = Product.objects.filter(price__range=(10, 50))

# Filter products with category in a list of categories
products = Product.objects.filter(category__in=['electronics', 'furniture'])
```

