---
title : useEffect Hook
published : true
---


`useEffect` is another **core React Hook**, and it’s used for handling **side effects** in functional components.

### 🔹 What is a “side effect”?

In React, a **side effect** is anything that affects something **outside the component**, or something that React cannot do just by rendering UI.

Examples:

* Fetching data from an API
* Subscribing to events (e.g., `window.addEventListener`)
* Setting timers (`setTimeout`, `setInterval`)
* Manually updating the DOM

---

### 🔹 `useEffect` Syntax

```tsx
useEffect(() => {
  // effect logic here

  return () => {
    // cleanup logic (optional)
  };
}, [dependencies]);
```

* The **effect function** runs after the component renders.
* The **cleanup function** runs when the component unmounts or before the effect re-runs.
* The **dependencies array** tells React *when* to run the effect.

---

**🔹 When does it run?**

1. **No dependencies (`[]`)** → runs **once** after the first render (like `componentDidMount` in class components).

```tsx
   useEffect(() => {
     console.log("Runs only once when component mounted");
   }, []);
```

2. **With dependencies (`[value]`)** → runs after every render **when `value` changes**.

```tsx
  useEffect(() => {
     console.log("Runs when count changes");
  }, [count]);
```

3. **Without dependencies** → runs after **every render**.

```tsx
   useEffect(() => {
     console.log("Runs after every render");
   });
```

---

**🔹 Example: Fetching Data**

```tsx
import { useEffect, useState } from "react";

export default function Users() {
  const [users, setUsers] = useState([]);

  async function fetchUsers() {
      const res = await fetch("https://jsonplaceholder.typicode.com/users");
      const data = await res.json();
      setUsers(data);
  }

  useEffect(() => {
    fetchUsers();
  }, []); // runs once after mount

  return (
    <ul>
      {users.map((u) => (
        <li key={u.id}>{u.name}</li>
      ))}
    </ul>
  );
}
```

---

**🔹 Example: Cleanup with Event Listener**

```tsx
import { useEffect, useState } from "react";

export default function KeyPressTracker() {
  const [lastKey, setLastKey] = useState(null);

  useEffect(() => {
    function handleKeyDown(event: KeyboardEvent) {
      setLastKey(event.key); // store which key was pressed
    }

    window.addEventListener("keydown", handleKeyDown);

    // Cleanup when component unmounts
    return () => {
      window.removeEventListener("keydown", handleKeyDown);
    };
  }, []);

  return (
    <div>
      <h2>Press any key on your keyboard ⌨️</h2>
      {lastKey && <p>You pressed: <b>{lastKey}</b></p>}
    </div>
  );
}
```


#### ✅ Think of `useEffect` like this:

* **`useState`** → “remember values”
* **`useEffect`** → “do something after render”

---
